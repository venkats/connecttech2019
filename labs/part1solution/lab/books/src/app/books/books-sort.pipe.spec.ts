import { BooksSortPipe } from './books-sort.pipe';
import { Book } from './book';

describe('BooksSortPipe', () => {
  it('should have a name', function() {
    const annotations = BooksSortPipe['__annotations__'][0];

    expect(annotations.name).toEqual('sortbooks');
  });                                                  

  it('should sort the given books in ascending order of title', function() {
    let pipe = new BooksSortPipe();

    let books = [             
      new Book('second', 'a', 2019, 1),
      new Book('first', 'a', 2019, 1),
    ];

    let sortedBooks = pipe.transform(books);

    expect(sortedBooks[0].title).toEqual('first');
    expect(sortedBooks[1].title).toEqual('second');
  });

  it('should not mutate the given argument', function() {
    let pipe = new BooksSortPipe();

    let books = [             
      new Book('second', 'a', 2019, 1),
      new Book('first', 'a', 2019, 1),
    ];

    let sortedBooks = pipe.transform(books);

    expect(books[0].title).toEqual('second');
  });
});
